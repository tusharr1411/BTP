{"ast":null,"code":"import Upload from\"./artifacts/contracts/Upload.sol/Upload.json\";import{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import FileUpload from\"./components/FileUpload\";import Display from\"./components/Display\";import Modal from\"./components/Modal\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[account,setAccount]=useState(\"\");const[contract,setContract]=useState(null);const[provider,setProvider]=useState(null);const[modalOpen,setModalOpen]=useState(false);useEffect(()=>{const provider=new ethers.providers.Web3Provider(window.ethereum);const loadProvider=async()=>{if(provider){window.ethereum.on(\"chainChanged\",()=>{window.location.reload();});window.ethereum.on(\"accountsChanged\",()=>{window.location.reload();});await provider.send(\"eth_requestAccounts\",[]);const signer=provider.getSigner();const address=await signer.getAddress();setAccount(address);let contractAddress=\"0x92edDDbfd1DF3D1E45F9a60cdd89470b992edDb3\";const contract=new ethers.Contract(contractAddress,Upload.abi,signer);//console.log(contract);\nsetContract(contract);setProvider(provider);}else{console.error(\"Metamask is not installed\");}};provider&&loadProvider();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!modalOpen&&/*#__PURE__*/_jsx(\"button\",{className:\"share\",onClick:()=>setModalOpen(true),children:\"Share\"}),modalOpen&&/*#__PURE__*/_jsx(Modal,{setModalOpen:setModalOpen,contract:contract}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"white\"},children:\" D-drive\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg3\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"white\"},children:[\"Account : \",account?account:\"Not connected\"]}),/*#__PURE__*/_jsx(FileUpload,{account:account,provider:provider,contract:contract}),/*#__PURE__*/_jsx(Display,{contract:contract,account:account})]})]});}export default App;","map":{"version":3,"names":["Upload","useState","useEffect","ethers","FileUpload","Display","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","account","setAccount","contract","setContract","provider","setProvider","modalOpen","setModalOpen","providers","Web3Provider","window","ethereum","loadProvider","on","location","reload","send","signer","getSigner","address","getAddress","contractAddress","Contract","abi","console","error","children","className","onClick","style","color","class"],"sources":["/root/blockchain_projects/project_btp/frontend/src/App.js"],"sourcesContent":["import Upload from \"./artifacts/contracts/Upload.sol/Upload.json\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport FileUpload from \"./components/FileUpload\";\nimport Display from \"./components/Display\";\nimport Modal from \"./components/Modal\";\nimport \"./App.css\";\n\nfunction App() {\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n\n  useEffect(() => {\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n\n    const loadProvider = async () => {\n      if (provider) {\n        window.ethereum.on(\"chainChanged\", () => {\n          window.location.reload();\n        });\n\n        window.ethereum.on(\"accountsChanged\", () => {\n          window.location.reload();\n        });\n        await provider.send(\"eth_requestAccounts\", []);\n        const signer = provider.getSigner();\n        const address = await signer.getAddress();\n        setAccount(address);\n        let contractAddress = \"0x92edDDbfd1DF3D1E45F9a60cdd89470b992edDb3\";\n\n        const contract = new ethers.Contract(\n          contractAddress,\n          Upload.abi,\n          signer\n        );\n        //console.log(contract);\n        setContract(contract);\n        setProvider(provider);\n      } else {\n        console.error(\"Metamask is not installed\");\n      }\n    };\n    provider && loadProvider();\n  }, []);\n  return (\n    <>\n      {!modalOpen && (\n        <button className=\"share\" onClick={() => setModalOpen(true)}>\n          Share\n        </button>\n      )}\n      {modalOpen && (\n        <Modal setModalOpen={setModalOpen} contract={contract}></Modal>\n      )}\n\n      <div className=\"App\">\n        <h1 style={{ color: \"white\" }}> D-drive</h1>\n        <div class=\"bg\"></div>\n        <div class=\"bg bg2\"></div>\n        <div class=\"bg bg3\"></div>\n\n        <p style={{ color: \"white\" }}>\n          Account : {account ? account : \"Not connected\"}\n        </p>\n        <FileUpload\n          account={account}\n          provider={provider}\n          contract={contract}\n        ></FileUpload>\n        <Display contract={contract} account={account}></Display>\n      </div>\n    </>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}