{"ast":null,"code":"var _jsxFileName = \"/root/blockchain_projects/final_BTP/frontend/src/components/FileUpload.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport \"./FileUpload.css\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  contract,\n  account,\n  provider\n}) => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState(\"No File Selected\");\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (file) {\n      try {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n\n        //pinata code\n        const resFile = await axios({\n          method: \"post\",\n          url: \"https://api.pinata.cloud/pinning/pinFileToIPFS\",\n          data: formData,\n          headers: {\n            pinata_api_key: `37863d70ec4408f0253f`,\n            pinata_secret_api_key: `6abf8c985a9e66a25d2a2d501c186ec273fc56f3903b8ae9eb2bdb6ee0e9b00d`,\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n        //////\n\n        //collecting image hash\n        const fileHash = `https://gateway.pinata.cloud/ipfs/${resFile.data.IpfsHash}`;\n        contract.add(account, fileHash);\n        alert(\"Uploaded to Pinata\");\n        setFileName(\"No file Selected\");\n        setFile(null);\n      } catch (e) {\n        console.log(\"Unable to upload\");\n        alert(\"Unable to upload\");\n      }\n    }\n  };\n  const retrieveFile = e => {\n    const data = e.target.files[0]; // files array of selected files\n    const reader = new window.FileReader();\n    reader.readAsArrayBuffer(data);\n    reader.onloadend = () => {\n      setFile(e.target.files[0]);\n    };\n    setFileName(e.target.files[0].name);\n    e.preventDefault();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"top\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"file-upload\",\n        className: \"choose\",\n        children: \" Choose Your File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"file-upload\",\n        name: \"data\",\n        onChange: retrieveFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"textArea\",\n        children: [\"File: \", fileName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"upload\",\n        type: \"submit\",\n        disabled: !file,\n        children: \"Upload File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"6PvazD6z0Ae5bbuKI/AXOoTlw30=\");\n_c = FileUpload;\nexport default FileUpload;\n\n//////////////////////////////////////////////\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["useState","axios","jsxDEV","_jsxDEV","FileUpload","contract","account","provider","_s","file","setFile","fileName","setFileName","handleSubmit","e","preventDefault","formData","FormData","append","resFile","method","url","data","headers","pinata_api_key","pinata_secret_api_key","fileHash","IpfsHash","add","alert","console","log","retrieveFile","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","name","className","children","onSubmit","htmlFor","_jsxFileName","lineNumber","columnNumber","type","id","onChange","disabled","_c","$RefreshReg$"],"sources":["/root/blockchain_projects/final_BTP/frontend/src/components/FileUpload.js"],"sourcesContent":["import { useState } from \"react\";\nimport \"./FileUpload.css\";\nimport axios from \"axios\";\n\n\n\nconst FileUpload = ({contract, account, provider})=>{\n    const [file, setFile] = useState(null);\n    const [fileName, setFileName] = useState(\"No File Selected\");\n\n    const handleSubmit= async (e)=>{\n        e.preventDefault();\n        if(file){\n            try{\n                const formData = new FormData();\n                formData.append(\"file\", file);\n\n                //pinata code\n                const resFile = await axios({\n                    method:\"post\",\n                    url:\"https://api.pinata.cloud/pinning/pinFileToIPFS\",\n                    data:formData,\n                    headers:{\n                        pinata_api_key: `37863d70ec4408f0253f`,\n                        pinata_secret_api_key: `6abf8c985a9e66a25d2a2d501c186ec273fc56f3903b8ae9eb2bdb6ee0e9b00d`,\n                        \"Content-Type\":\"multipart/form-data\",\n                    },\n                });\n                //////\n\n\n                //collecting image hash\n                const fileHash = `https://gateway.pinata.cloud/ipfs/${resFile.data.IpfsHash}`;\n                contract.add(account,fileHash);\n                alert(\"Uploaded to Pinata\");\n                setFileName(\"No file Selected\");\n                setFile(null);\n            }\n            catch(e){\n                console.log(\"Unable to upload\")\n                alert(\"Unable to upload\");\n            }\n        }\n\n\n    }\n\n    const retrieveFile =  (e)=>{\n        const data = e.target.files[0];// files array of selected files\n        const reader = new window.FileReader();\n        reader.readAsArrayBuffer(data);\n        reader.onloadend=()=>{\n            setFile(e.target.files[0]);\n        }\n        setFileName(e.target.files[0].name);\n        e.preventDefault();\n    }\n\n\n    return (\n    <div className=\"top\">\n        <form className=\"form\" onSubmit={handleSubmit}>\n            <label htmlFor = \"file-upload\" className=\"choose\"> Choose Your File</label>\n            <input type=\"file\"  id =\"file-upload\" name=\"data\" onChange={retrieveFile}></input>\n            <span className=\"textArea\" >File: {fileName}</span>\n            <button className=\"upload\" type=\"submit\" disabled={!file}>Upload File</button>\n        </form>\n    </div>\n    )\n}\n\nexport default FileUpload;\n\n\n\n//////////////////////////////////////////////\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}